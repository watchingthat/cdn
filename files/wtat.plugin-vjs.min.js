var wtAdTracer=function(){"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function t(t,r){var a;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=function(t,r){if(t){if("string"==typeof t)return e(t,r);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?e(t,r):void 0}}(t))||r&&t&&"number"==typeof t.length){a&&(t=a);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(a=t[Symbol.iterator]()).next.bind(a)}var r,a={endpoint:"https://c.p2r14.com/v5/in",batchSize:5,batchInterval:1e3,debug:!1},n={0:[]},i=0,s=!1,o=!1,l=function(){if(a.debug)try{for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];console.warn.apply(null,["%cWTAT.stream","background:#ffd400;color:#000;padding:2px"].concat(t))}catch(e){}};function d(){a.batchInterval>0&&(r=setInterval(p,a.batchInterval))}function c(){clearInterval(r)}function p(){if(!s){s=!0,c();var e=i;n[i+1]=[],i++,n[e].length&&function(e,t){l("sending",e);try{var r=JSON.stringify(e);if(navigator.sendBeacon){var n=new FormData;n.append("batch",r),n.append("apiKey",a.apiKey),navigator.sendBeacon(a.endpoint,n)||l("beacon queue error"),g(t)}else{var i=new XMLHttpRequest;i.open("POST",a.endpoint,!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.setRequestHeader("x-api-key",a.apiKey),i.setRequestHeader("Connection","keep-alive"),i.onreadystatechange=function(){g(t)},i.send("batch="+encodeURIComponent(r))}}catch(e){l("xhr error",e.message)}}(n[e],e),s=!1,d()}}function g(e){delete n[e]}var u=function(){function e(e){void 0===e&&(e={}),a=Object.assign(a,e),d()}var t=e.prototype;return t.push=function(e){o||(l("received",e),n[i].push(e),n[i].length>=a.batchSize&&p())},t.stop=function(){o=!0,n[i].length&&p(),c()},e}(),y=function(){function e(e,t){var r,a=this;void 0===t&&(t={}),this.options={debug:!1,sendAllCustom:!1},this.sessionId=void 0,this.sessionStartTime=0,this.loopIdx=0,this.requiredData={},this.firstTimeData=null,this.firstTimeDataSent=!1,this.env={},this.stream=void 0,this.createSession=function(){for(var e,t="",r=0;r<12;r++)t+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXZY01234567890".charAt(Math.floor(64*Math.random()));return a.sessionId=Date.now()+"-"+t,a.sessionStartTime=Date.now(),a.loopIdx+=1,a.requiredData={rid:a.sessionId,idx:a.loopIdx,playerId:null==(e=a.env)||null==e.getPlayerId?void 0:e.getPlayerId()},a.firstTimeData=a.gatherFirstTimeData(),a.firstTimeDataSent=!1,a.sessionId},this.gatherFirstTimeData=function(){var e,t,r=a.getWindowWH(),n=r[0],i=r[1],s=r[2],o={type:"init",src:a.options.src,v:a.options.v,aBl:null!=(e=null==a.env.getAdBlock?void 0:a.env.getAdBlock())?e:-1,ww:n,wh:i,fif:s,pu:a.getPU(s),plV:null==(t=a.env)||null==t.getPlayerVersion?void 0:t.getPlayerVersion()};try{var l=h(window,["wtatCustom","fields"],{});Object.keys(l).length&&(o.custom=o.custom||{},Object.entries(l).forEach((function(e){var t=e[0],r=e[1];o.custom[t]="function"==typeof r?r(o):r})))}catch(e){a.log("gatherFirstTimeData error",e.message)}return o},this.sendData=function(e){a.firstTimeDataSent||(a.firstTimeDataSent=!0,a.stream.push(a.gatherData(a.firstTimeData))),a.stream.push(a.gatherData(e))},this.gatherData=function(e){var t,r,n,i;void 0===e&&(e={});try{var s=a.env.getVideoSlot();if(s){r=a.getVisiblePercent(s);var o=s.getBoundingClientRect();n=parseInt(o.width,10),i=parseInt(o.height,10)}}catch(e){a.log("gatherData ERROR reading ad WxH:",e.message)}var l=Object.assign({},e,a.requiredData,{mediaId:null==(t=a.env)||null==t.getMediaId?void 0:t.getMediaId(),per:r,w:n,h:i,cst:Date.now()-(a.sessionStartTime||0)});try{var d=h(window,["wtatCustom","fields"],{});Object.keys(d).length&&(l.custom=l.custom||{},Object.entries(d).forEach((function(e){var t=e[0],r=e[1];"function"==typeof r?l.custom[t]=r(l):a.options.sendAllCustom&&(l.custom[t]=r)})))}catch(e){a.log("gatherData error",e.message)}return l},this.replaceUrlMacros=function(e){if(!e)return e;if("string"!=typeof e)return e;var t=a.gatherData(a.firstTimeData);return e.replace(/\[wt_ad_width]/g,t.w).replace(/\[wt_ad_width_label]/g,"wt_ad_width").replace(/\[wt_ad_height]/g,t.h).replace(/\[wt_ad_height_label]/g,"wt_ad_height").replace(/\[wt_per]/g,String(t.per)).replace(/\[wt_per_label]/g,"wt_per").replace(/\[wt_page_url]/g,encodeURIComponent(t.pu)).replace(/\[wt_page_url_unenc]/g,t.pu).replace(/\[wt_page_url_label]/g,"wt_page_url").replace(/\[wt_fif]/g,String(t.fif)).replace(/\[wt_fif_label]/g,"wt_fif").replace(/\[wt_win_width]/g,String(t.ww)).replace(/\[wt_win_width_label]/g,"wt_win_width").replace(/\[wt_win_height]/g,String(t.wh)).replace(/\[wt_win_height_label]/g,"wt_win_height").replace(/\[wt_timestamp]/g,String(Date.now()))},this.getPU=function(e){var t=document.referrer;!t&&e&&(t=document.documentURI);try{(window.location===window.parent.location||!t&&document.location&&document.location.href)&&(t=document.location.href)}catch(e){a.log("gatherData pu set to referrer:",t,e.message)}return t},this.getPositionRelativeToViewPort=function(e,t){var r=t,n=t.parent,i={left:0,right:0,top:0,bottom:0};if(e){var s=e.getBoundingClientRect();r!==n&&(i=a.getPositionRelativeToViewPort(r.frameElement,n)),i={left:s.left+i.left,right:s.right+i.left,top:s.top+i.top,bottom:s.bottom+i.top}}return i},this.getViewPortSize=function(e){var t={width:1/0,height:1/0,area:1/0};return!isNaN(e.document.body.clientWidth)&&e.document.body.clientWidth>0&&(t.width=e.document.body.clientWidth),!isNaN(e.document.body.clientHeight)&&e.document.body.clientHeight>0&&(t.height=e.document.body.clientHeight),e.document.documentElement&&e.document.documentElement.clientWidth&&!isNaN(e.document.documentElement.clientWidth)&&(t.width=e.document.documentElement.clientWidth),e.document.documentElement&&e.document.documentElement.clientHeight&&!isNaN(e.document.documentElement.clientHeight)&&(t.height=e.document.documentElement.clientHeight),e.innerWidth&&!isNaN(e.innerWidth)&&(t.width=Math.min(t.width,e.innerWidth)),e.innerHeight&&!isNaN(e.innerHeight)&&(t.height=Math.min(t.height,e.innerHeight)),t.area=t.height*t.width,t},this.getWindowWH=function(){var e,t=0,r=0,n=0;try{t=(e=a.getViewPortSize(window.top)).width,r=e.height,n=1}catch(e){a.log("getWindowWH catch 1:",e.message)}if(!t){var i=window;t=(e=a.getViewPortSize(i)).width,r=e.height;try{for(;i.parent&&i!==i.parent;)t=(e=a.getViewPortSize(i.parent)).width,r=e.height,i=i.parent}catch(e){a.log("getWindowWH catch 2:",e.message)}}return[t,r,n]},this.getSameDomainViewability=function(e){var t=a.getViewPortSize(window.top),r=e.getBoundingClientRect(),n=-1,i=-1;if(t.area===1/0)return{error:"Failed to determine viewport",horizontalPer:0,verticalPer:0};var s=a.getPositionRelativeToViewPort(e,window);try{n=s.bottom<0||s.top>t.height?0:s.top<t.height&&s.bottom>t.height?(t.height-s.top)/r.height*100:s.top<0&&s.bottom>0?s.bottom/r.height*100:100,i=s.right<0||s.left>t.width?0:s.right<t.width&&s.left>t.width?(t.width-s.right)/r.width*100:s.left<0&&s.right>0?s.right/r.width*100:100}catch(e){return{error:"Failed to calculate viewability: "+e.message,horizontalPer:0,verticalPer:0}}return{horizontalPer:i,verticalPer:n}},this.getVisiblePercent=function(e){if(!e)return-1;var t={percentObscured:0,percentViewable:0,acceptedViewablePercentage:50,viewabilityStatus:!1,duration:0,cssInvisible:!1,domObscured:!1,secureIFrame:!1};try{var r=e.getBoundingClientRect();r.width*r.height>=242500&&(t.acceptedViewablePercentage=30);var n=window.getComputedStyle(e,null),i=n.getPropertyValue("visibility"),s=n.getPropertyValue("display");if("hidden"!==i&&"none"!==s||(t.cssInvisible=!0),t.cssInvisible)return 0;t.percentObscured=t.percentObscured||0;var o={};try{window.top.innerWidth||window.top.document.documentElement.clientWidth||window.top.document.body.clientWidth?o=a.getSameDomainViewability(e):t.secureIFrame=!0}catch(e){t.secureIFrame=!0}return o.error||t.secureIFrame||(t.percentViewable=(o.verticalPer-t.percentObscured)*(o.horizontalPer-t.percentObscured)/100),t.percentViewable?parseInt(t.percentViewable,10):0}catch(e){return a.log("getVisiblePercent error",e.message),-2}},this.logger=function(e){return function(){if(a.options.debug)try{for(var t,r,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];console.warn.apply(null,["%c"+e+" "+(null!=(t=null==(r=a.env)||null==r.getPlayerId?void 0:r.getPlayerId())?t:""),"background:#ffd400;color:#000;padding:2px"].concat(i))}catch(e){}}},this.options=Object.assign(this.options,e),this.env=t;var n={debug:this.options.debug,apiKey:this.options.apiKey};this.options.wtUrl&&(n.endpoint=this.options.wtUrl),window&&window.wtStream?this.stream=window.wtStream:(this.stream=new u(n),window&&(window.wtStream=this.stream)),this.log=this.logger("WTAT.core",this.options.debug,null==(r=this.env)||null==r.getPlayerId?void 0:r.getPlayerId()),this.log("version",this.options.v),this.createSession()}return e.prototype.onEvent=function(e){void 0===e&&(e={}),this.log("start.onEvent",e.type),this.sendData(e)},e}();function h(e,r,a){if(!e)return a;for(var n,i=e,s=t(Array.isArray(r)?r:r.split("."));!(n=s()).done;){var o=n.value;if(void 0===i[o])return a;i=i[o]}return i}var m="afs_ads",f={0:"PREROLL","-1":"POSTROLL"};var v,w,E="3.0.1",b=((w={modules:(v={},v.wtatPlayer=function(e,r){var a=this;void 0===r&&(r={}),this.player=void 0,this.options=void 0,this.adsManager=void 0,this.imaAdsLoader=void 0,this.sessionFlags={},this.resetOnLoadStart=!1,this.log=function(){},this.utils=void 0,this.originalIma3AdMacroReplacement=void 0,this.SHORT_NAME="bcp",this.hookFw=function(){a.player.FreeWheelPlugin.Html5&&a.player.FreeWheelPlugin.Html5._adContext&&(a.sessionFlags.adURL=a.player.FreeWheelPlugin.Html5._adContext._adRequest.generateTypeBRequestUrl(),a.log("hookFw this.player.FreeWheelPlugin",a.player.FreeWheelPlugin),a.sessionFlags.fwHooked||(a.sessionFlags.fwHooked=!0,a.player.FreeWheelPlugin.Html5._adContext.addEventListener(window.tv.freewheel.SDK.EVENT_AD_IMPRESSION,(function(e){return a.player.trigger({type:"wt:imp",originalEvent:e})})),a.player.FreeWheelPlugin.Html5._adContext.addEventListener(window.tv.freewheel.SDK.EVENT_AD,(function(e){if(a.log("+++++EVENT_AD",e.subType,function(e){for(var r,a=[],n=t(e);!(r=n()).done;){var i=r.value;a.push(i+("function"==typeof e[i]?"()":""))}return a}(e.adInstance),e),e.subType===window.tv.freewheel.SDK.EVENT_ERROR&&!a.sessionFlags.imp&&a.sessionFlags.errCount<=10){a.sessionFlags.errCount=(a.sessionFlags.errCount||0)+1;var r=e[window.tv.freewheel.SDK.INFO_KEY_ERROR_CODE],n=e[window.tv.freewheel.SDK.INFO_KEY_ERROR_INFO],i=e[window.tv.freewheel.SDK.INFO_KEY_ERROR_MODULE];a.log("errorCode, errorInfo, errorModule",r,n,i),a.sessionFlags.hasPreviousError=!0;var s={type:"error",st:"fw",err:String(r||n),debug:String(n)};a.sessionFlags.lastAdType&&(s.adType=a.sessionFlags.lastAdType),a.sendData(s)}})),a.player.FreeWheelPlugin.Html5._adContext.addEventListener(window.tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,(function(e){var t;if(a.log("+++++EVENT_REQUEST_COMPLETE",e),e.success){if(!(e.response.errors&&e.response.errors.errors&&e.response.errors.errors.length))return a.player.trigger({type:"wt:al",originalEvent:e});t={type:"error",st:"fw",err:e.response.errors.errors[0].name}}else t={type:"error",st:"fw",err:"req-failed"};t&&a.sendData(t)}))))},this.getCurrentAdDetails=function(e){if(a.player.ima3){if(e){var t={adId:e.getAdId(),adSys:e.getAdSystem(),adAN:e.getAdvertiserName(),adDID:e.getDealId(),adWId:e.getWrapperAdIds(),adWSys:e.getWrapperAdSystems(),adMU:e.getMediaUrl(),adCId:e.getCreativeId(),adWCId:e.getWrapperCreativeIds()};if(e.getAdPodInfo){var r=e.getAdPodInfo();t.adType=f[r.getPodIndex()]||"MIDROLL",a.sessionFlags.lastAdType=t.adType}return t}}else if(a.player.FreeWheelPlugin){var n=e;if(!n&&a.player.FreeWheelPlugin.Html5&&a.player.FreeWheelPlugin.Html5._currentSlot&&(n=a.player.FreeWheelPlugin.Html5._currentSlot.getCurrentAdInstance()),n){var i={adId:n.getAdId(),adMU:n.getActiveCreativeRendition().getPrimaryCreativeRenditionAsset().getUrl(),adCId:n._creativeId,adType:n.getSlot().getTimePositionClass()};return a.sessionFlags.lastAdType=i.adType,i}}return{}},this.PLAYER_EVENTS={"ads-request":function(){var e,t,r={type:"serve"};return a.player.ima3?(e=a.player.ima3.settings.serverUrl,a.player.ima3.adsRequest&&a.player.ima3.adsRequest.adTagUrl&&(e||(e=a.player.ima3.adsRequest.adTagUrl),t=a.player.ima3.adsRequest.adTagUrl),r.adURL=t,a.options.sendDebug&&(r.debug="",e||(r.debug="missing originalAdURL"))):a.player.FreeWheelPlugin&&(a.hookFw(),r.adURL=a.player.FreeWheelPlugin.settings[a.player.FreeWheelPlugin.tech].serverUrl,a.player.FreeWheelPlugin.Html5&&!a.sessionFlags.fullAdURL&&(a.sessionFlags.adURL=a.player.FreeWheelPlugin.Html5._adContext._adRequest.generateTypeBRequestUrl())),r},"ads-ad-started":function(){var e={type:"sa"};return a.player.ads&&a.player.ads.ad&&a.player.ads.ad.type&&(e.adType=a.player.ads.ad.type,a.sessionFlags.lastAdType=e.adType),e},play:function(){if(!a.sessionFlags.play)return a.sessionFlags.play=!0,{type:"play"}},adtimeout:function(){if(!a.sessionFlags.hasPreviousError)return a.sessionFlags.hasPreviousError=!0,{type:"error",st:"player",err:"adtimeout"}},"ads-first-quartile":function(){var e={type:"efq"};return a.player.ads&&a.player.ads.ad&&a.player.ads.ad.type&&(e.adType=a.player.ads.ad.type,a.sessionFlags.lastAdType=e.adType),e},"ads-midpoint":function(){var e={type:"esq"};return a.player.ads&&a.player.ads.ad&&a.player.ads.ad.type&&(e.adType=a.player.ads.ad.type,a.sessionFlags.lastAdType=e.adType),e},"ads-third-quartile":function(){var e={type:"etq"};return a.player.ads&&a.player.ads.ad&&a.player.ads.ad.type&&(e.adType=a.player.ads.ad.type,a.sessionFlags.lastAdType=e.adType),e},"ads-ad-ended":function(){var e={type:"ecp"};return a.player.ads&&a.player.ads.ad&&a.player.ads.ad.type&&(e.adType=a.player.ads.ad.type,delete a.sessionFlags.lastAdType),e},playing:function(){if(!a.sessionFlags.c0)return delete a.sessionFlags.lastAdType,a.sessionFlags.c0=!0,{type:"c0"}},timeupdate:function(){if(a.sessionFlags.c0){var e=Math.floor(100*a.player.currentTime()/a.player.duration());if(!a.sessionFlags.c95&&e>=95)return a.sessionFlags.c95=!0,a.sessionFlags.c75=!0,a.sessionFlags.c50=!0,a.sessionFlags.c25=!0,{type:"c95"};if(!a.sessionFlags.c75&&e>=75)return a.sessionFlags.c75=!0,a.sessionFlags.c50=!0,a.sessionFlags.c25=!0,{type:"c75"};if(!a.sessionFlags.c50&&e>=50)return a.sessionFlags.c50=!0,a.sessionFlags.c25=!0,{type:"c50"};if(!a.sessionFlags.c25&&e>=25)return a.sessionFlags.c25=!0,{type:"c25"}}},"wt:imp":function(){a.sessionFlags.imp=!0;var e={type:"imp"},t=a.getCurrentAdDetails();return Object.assign(e,t),a.player.ads&&a.player.ads.ad&&a.player.ads.ad.type&&(e.adType=a.player.ads.ad.type,a.sessionFlags.lastAdType=e.adType),e},"wt:al":function(e){var t={type:"al"},r=e.originalEvent;try{if(a.player.ima3){if(r&&r.getAd){var n=a.getCurrentAdDetails(r.getAd());Object.assign(t,n)}}else if(a.player.FreeWheelPlugin){var i=a.getCurrentAdDetails();Object.assign(t,i)}}catch(e){a.log("no ad",e)}return t},"ima3-impression":function(e){a.player.trigger({type:"wt:imp",originalEvent:e})},"ima3-ready":function(){a.originalIma3AdMacroReplacement||(a.player.ima3?(a.originalIma3AdMacroReplacement=a.player.ima3.adMacroReplacement,a.player.ima3.adMacroReplacement=a._adMacroReplacement):a.log("WARNING: player.ima3 not available!"))},"ima3-loaded":function(e){a.player.trigger({type:"wt:al",originalEvent:e.originalEvent})},"ima3-log":function(e){if(e.originalEvent&&e.originalEvent.getAdData){var t=e.originalEvent.getAdData(),r={type:"error",st:"ima"};if(t.adError.g&&t.adError.g.errorCode?r.err=String(t.adError.g.errorCode):t.adError.h&&(r.err=String(t.adError.h)),a.sessionFlags.lastAdType&&(r.adType=a.sessionFlags.lastAdType),!t.adError||!t.adError.h&&!t.adError.g)try{r.debug="adData.adError: "+JSON.stringify(t.adError)}catch(e){r.debug="error getting adData.adError"}return r}},"ima3-hardtimeout":function(){return a.sessionFlags.hasPreviousError=!0,{type:"error",st:"ima",err:"ima3-hardtimeout"}},ima3error:function(){return a.sessionFlags.hasPreviousError=!0,{type:"error",st:"player",err:"ima3error"}},"ima3-ad-error":function(e){a.sessionFlags.hasPreviousError=!0;var t=e.originalEvent;if(t&&t.getError){var r=t.getError(),n=r.getVastErrorCode(),i=r.getErrorCode(),s={type:"error",st:"ima",err:String(n),err2:String(i)};a.sessionFlags.lastAdType&&(s.adType=a.sessionFlags.lastAdType);try{s.debug='imaError: "'+r.getMessage()+'", type: "'+r.getType()+'", reason: "'+(r.getInnerError&&r.getInnerError())+'"'}catch(e){}return a.log("IMA threw an error",r,r.getInnerError&&r.getInnerError()),a.log("ERROR: VAST CODE",n),s}return a.log("ima3-ad-error originalEvent does not look like an ima3 event",e),{type:"error",st:"player",err:"ima3-ad-error"}},"ima3-skip":function(){var e={type:"skip"};return a.player.ads&&a.player.ads.ad&&a.player.ads.ad.type&&(e.adType=a.player.ads.ad.type,delete a.sessionFlags.lastAdType),e},analytics_request:function(e){if(e&&e.params&&e.params.event){if("video_impression"===e.params.event)return{type:"bc:video_impression",autoplay:e.params.autoplay||!1};if("video_view"===e.params.event)return{type:"bc:video_view"}}},"fw-ads-manager-loaded":this.hookFw},this.start=function(){a.utils=new y(a.options,{getVideoSlot:a.getVideoSlot,getAdBlock:a.getAdBlock,getMediaId:a.getMediaId,getPlayerId:a.getPlayerId,getPlayerVersion:a.getPlayerVersion}),a.log=a.utils.logger("WTAT.bcp"),a.player.ima3&&(a.originalIma3AdMacroReplacement=a.player.ima3.adMacroReplacement,a.player.ima3.adMacroReplacement=a._adMacroReplacement);var e=a;Object.assign(a.PLAYER_EVENTS,h(window,["wtatCustom","events"],{}),a.PLAYER_EVENTS),Object.keys(a.PLAYER_EVENTS).forEach((function(t){e.player.on(t,e._onPlayerEvent)})),a.player.on("loadstart",a.resetState),a.player.on("ended",a.resetState)},this.resetState=function(e){("loadstart"!==e.type||a.resetOnLoadStart)&&(a.sessionFlags={},a.utils.createSession()),a.resetOnLoadStart="loadstart"===e.type,"loadstart"===e.type&&a.player.bcinfo&&a.player.bcinfo.accountId&&a.player.mediainfo&&a.player.mediainfo.id&&(a.sessionFlags.mediaId=a.player.bcinfo.accountId+":"+a.player.mediainfo.id)},this.sendData=function(e){e&&!a.sessionFlags.fullAdURL&&a.sessionFlags.adURL&&(e.adURL=a.sessionFlags.adURL,a.sessionFlags.fullAdURL=!0,delete a.sessionFlags.adURL),a.utils.sendData(e)},this._adMacroReplacement=function(e){var t=a.utils.replaceUrlMacros(e),r=a.originalIma3AdMacroReplacement(t);return a.log("_adMacroReplacement on",e,"resulted in",t,"first then in",r),r},this._onPlayerEvent=function(e){var t;a.PLAYER_EVENTS[e.type]?(t="function"==typeof a.PLAYER_EVENTS[e.type]?a.PLAYER_EVENTS[e.type](e):!0===a.PLAYER_EVENTS[e.type]?{type:e.type}:a.PLAYER_EVENTS[e.type])&&(t.type?a.sendData(t):a.log("Encountered an event without a type. Not sending",e.type,t)):a.log("Untracked player event triggered",e.type,e)},this._honeyPot=function(){var e=document.createElement("div");e.className=m,e.innerHTML="&nbsp;",e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.background="transparent";try{a.player.el().appendChild(e),a.sessionFlags.honeyPotOk=!0}catch(e){a.log("cannot attach honeypot",e.message)}},this.cleanup=function(){a.originalIma3AdMacroReplacement=null,delete a.utils,a.player=null,a.adsManager=null,a.imaAdsLoader=null,delete a.log},this.getVideoSlot=function(){return a.player.el()},this.getMediaId=function(){return a.sessionFlags.mediaId},this.getPlayerId=function(){return a.player.bcinfo&&a.player.bcinfo.accountId&&a.player.bcinfo.playerId?a.player.bcinfo.accountId+":"+a.player.bcinfo.playerId:a.player.options_&&a.player.options_["data-account"]&&a.player.options_["data-player"]?a.player.options_["data-account"]+":"+a.player.options_["data-player"]:void 0},this.getPlayerVersion=function(){return h(a.player,["bcAnalytics","settings","platformVersion"])},this.getAdBlock=function(){if(!a.sessionFlags.honeyPotOk)return-1;try{var e=a.player.el().getElementsByClassName(m),t=e[e.length-1];return t&&null!==t.offsetParent&&t.className===m&&0!==t.innerHTML.length&&0!==t.clientHeight?0:1}catch(e){return a.log("error getting ad block status",e.message),-2}},this.player=e,this.options=r,this.options.src=this.SHORT_NAME,this.options.debug,this._honeyPot()},v)}).wtatPlayer={},w),_={v:E},F={};try{var T=localStorage.getItem("wtDebug"),P=localStorage.getItem("wtUrl");T&&(F.debug=T),P&&(F.wtUrl=P)}catch(e){}function I(e){var t=this;void 0===e&&(e={}),this.ready((function(){var r=Object.assign({},_,e);Object.keys(b.modules).forEach((function(a){var n=Object.assign({},r,b[a],e[a],F);t[a]=new b.modules[a](t,n),t[a].start(),t.addClass("wtat-"+a)}))}))}return(videojs.registerPlugin||videojs.plugin)("wtAdTracer",I),I.VERSION=E,I}();
