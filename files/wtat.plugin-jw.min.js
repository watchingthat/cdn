var wtAdTracer=function(){"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function t(t,i){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,i){if(t){if("string"==typeof t)return e(t,i);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(t,i):void 0}}(t))||i&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}var i,n={endpoint:"https://c.p2r14.com/v5/in",batchSize:5,batchInterval:1e3,debug:!1},r={0:[]},a=0,o=!1,s=!1,l=function(){if(n.debug)try{for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];console.warn.apply(null,["%cWTAT.stream","background:#ffd400;color:#000;padding:2px"].concat(t))}catch(e){}};function d(){n.batchInterval>0&&(i=setInterval(u,n.batchInterval))}function c(){clearInterval(i)}function u(){if(!o){o=!0,c();var e=a;r[a+1]=[],a++,r[e].length&&function(e,t){l("sending",e);try{var i=JSON.stringify(e);if(navigator.sendBeacon){var r=new FormData;r.append("batch",i),r.append("apiKey",n.apiKey),navigator.sendBeacon(n.endpoint,r)||l("beacon queue error"),g(t)}else{var a=new XMLHttpRequest;a.open("POST",n.endpoint,!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.setRequestHeader("x-api-key",n.apiKey),a.setRequestHeader("Connection","keep-alive"),a.onreadystatechange=function(){g(t)},a.send("batch="+encodeURIComponent(i))}}catch(e){l("xhr error",e.message)}}(r[e],e),o=!1,d()}}function g(e){delete r[e]}var p=function(){function e(e){void 0===e&&(e={}),n=Object.assign(n,e),d()}var t=e.prototype;return t.push=function(e){s||(l("received",e),r[a].push(e),r[a].length>=n.batchSize&&u())},t.stop=function(){s=!0,r[a].length&&u(),c()},e}(),h=function(){function e(e,t){var i,n=this;void 0===t&&(t={}),this.options={debug:!1,sendAllCustom:!1},this.sessionId=void 0,this.sessionStartTime=0,this.loopIdx=0,this.requiredData={},this.firstTimeData=null,this.firstTimeDataSent=!1,this.env={},this.stream=void 0,this.createSession=function(){for(var e,t="",i=0;i<12;i++)t+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXZY01234567890".charAt(Math.floor(64*Math.random()));return n.sessionId=Date.now()+"-"+t,n.sessionStartTime=Date.now(),n.loopIdx+=1,n.requiredData={rid:n.sessionId,idx:n.loopIdx,playerId:null==(e=n.env)||null==e.getPlayerId?void 0:e.getPlayerId()},n.firstTimeData=n.gatherFirstTimeData(),n.firstTimeDataSent=!1,n.sessionId},this.gatherFirstTimeData=function(){var e,t,i=n.getWindowWH(),r=i[0],a=i[1],o=i[2],s={type:"init",src:n.options.src,v:n.options.v,aBl:null!=(e=null==n.env.getAdBlock?void 0:n.env.getAdBlock())?e:-1,ww:r,wh:a,fif:o,pu:n.getPU(o),plV:null==(t=n.env)||null==t.getPlayerVersion?void 0:t.getPlayerVersion()};try{var l=w(window,["wtatCustom","fields"],{});Object.keys(l).length&&(s.custom=s.custom||{},Object.entries(l).forEach((function(e){var t=e[0],i=e[1];s.custom[t]="function"==typeof i?i(s):i})))}catch(e){n.log("gatherFirstTimeData error",e.message)}return s},this.sendData=function(e){n.firstTimeDataSent||(n.firstTimeDataSent=!0,n.stream.push(n.gatherData(n.firstTimeData))),n.stream.push(n.gatherData(e))},this.gatherData=function(e){var t,i,r,a;void 0===e&&(e={});try{var o=n.env.getVideoSlot();if(o){i=n.getVisiblePercent(o);var s=o.getBoundingClientRect();r=parseInt(s.width,10),a=parseInt(s.height,10)}}catch(e){n.log("gatherData ERROR reading ad WxH:",e.message)}var l=Object.assign({},e,n.requiredData,{mediaId:null==(t=n.env)||null==t.getMediaId?void 0:t.getMediaId(),per:i,w:r,h:a,cst:Date.now()-(n.sessionStartTime||0)});try{var d=w(window,["wtatCustom","fields"],{});Object.keys(d).length&&(l.custom=l.custom||{},Object.entries(d).forEach((function(e){var t=e[0],i=e[1];"function"==typeof i?l.custom[t]=i(l):n.options.sendAllCustom&&(l.custom[t]=i)})))}catch(e){n.log("gatherData error",e.message)}return l},this.replaceUrlMacros=function(e){if(!e)return e;if("string"!=typeof e)return e;var t=n.gatherData(n.firstTimeData);return e.replace(/\[wt_ad_width]/g,t.w).replace(/\[wt_ad_width_label]/g,"wt_ad_width").replace(/\[wt_ad_height]/g,t.h).replace(/\[wt_ad_height_label]/g,"wt_ad_height").replace(/\[wt_per]/g,String(t.per)).replace(/\[wt_per_label]/g,"wt_per").replace(/\[wt_page_url]/g,encodeURIComponent(t.pu)).replace(/\[wt_page_url_unenc]/g,t.pu).replace(/\[wt_page_url_label]/g,"wt_page_url").replace(/\[wt_fif]/g,String(t.fif)).replace(/\[wt_fif_label]/g,"wt_fif").replace(/\[wt_win_width]/g,String(t.ww)).replace(/\[wt_win_width_label]/g,"wt_win_width").replace(/\[wt_win_height]/g,String(t.wh)).replace(/\[wt_win_height_label]/g,"wt_win_height").replace(/\[wt_timestamp]/g,String(Date.now()))},this.getPU=function(e){var t=document.referrer;!t&&e&&(t=document.documentURI);try{(window.location===window.parent.location||!t&&document.location&&document.location.href)&&(t=document.location.href)}catch(e){n.log("gatherData pu set to referrer:",t,e.message)}return t},this.getPositionRelativeToViewPort=function(e,t){var i=t,r=t.parent,a={left:0,right:0,top:0,bottom:0};if(e){var o=e.getBoundingClientRect();i!==r&&(a=n.getPositionRelativeToViewPort(i.frameElement,r)),a={left:o.left+a.left,right:o.right+a.left,top:o.top+a.top,bottom:o.bottom+a.top}}return a},this.getViewPortSize=function(e){var t={width:1/0,height:1/0,area:1/0};return!isNaN(e.document.body.clientWidth)&&e.document.body.clientWidth>0&&(t.width=e.document.body.clientWidth),!isNaN(e.document.body.clientHeight)&&e.document.body.clientHeight>0&&(t.height=e.document.body.clientHeight),e.document.documentElement&&e.document.documentElement.clientWidth&&!isNaN(e.document.documentElement.clientWidth)&&(t.width=e.document.documentElement.clientWidth),e.document.documentElement&&e.document.documentElement.clientHeight&&!isNaN(e.document.documentElement.clientHeight)&&(t.height=e.document.documentElement.clientHeight),e.innerWidth&&!isNaN(e.innerWidth)&&(t.width=Math.min(t.width,e.innerWidth)),e.innerHeight&&!isNaN(e.innerHeight)&&(t.height=Math.min(t.height,e.innerHeight)),t.area=t.height*t.width,t},this.getWindowWH=function(){var e,t=0,i=0,r=0;try{t=(e=n.getViewPortSize(window.top)).width,i=e.height,r=1}catch(e){n.log("getWindowWH catch 1:",e.message)}if(!t){var a=window;t=(e=n.getViewPortSize(a)).width,i=e.height;try{for(;a.parent&&a!==a.parent;)t=(e=n.getViewPortSize(a.parent)).width,i=e.height,a=a.parent}catch(e){n.log("getWindowWH catch 2:",e.message)}}return[t,i,r]},this.getSameDomainViewability=function(e){var t=n.getViewPortSize(window.top),i=e.getBoundingClientRect(),r=-1,a=-1;if(t.area===1/0)return{error:"Failed to determine viewport",horizontalPer:0,verticalPer:0};var o=n.getPositionRelativeToViewPort(e,window);try{r=o.bottom<0||o.top>t.height?0:o.top<t.height&&o.bottom>t.height?(t.height-o.top)/i.height*100:o.top<0&&o.bottom>0?o.bottom/i.height*100:100,a=o.right<0||o.left>t.width?0:o.right<t.width&&o.left>t.width?(t.width-o.right)/i.width*100:o.left<0&&o.right>0?o.right/i.width*100:100}catch(e){return{error:"Failed to calculate viewability: "+e.message,horizontalPer:0,verticalPer:0}}return{horizontalPer:a,verticalPer:r}},this.getVisiblePercent=function(e){if(!e)return-1;var t={percentObscured:0,percentViewable:0,acceptedViewablePercentage:50,viewabilityStatus:!1,duration:0,cssInvisible:!1,domObscured:!1,secureIFrame:!1};try{var i=e.getBoundingClientRect();i.width*i.height>=242500&&(t.acceptedViewablePercentage=30);var r=window.getComputedStyle(e,null),a=r.getPropertyValue("visibility"),o=r.getPropertyValue("display");if("hidden"!==a&&"none"!==o||(t.cssInvisible=!0),t.cssInvisible)return 0;t.percentObscured=t.percentObscured||0;var s={};try{window.top.innerWidth||window.top.document.documentElement.clientWidth||window.top.document.body.clientWidth?s=n.getSameDomainViewability(e):t.secureIFrame=!0}catch(e){t.secureIFrame=!0}return s.error||t.secureIFrame||(t.percentViewable=(s.verticalPer-t.percentObscured)*(s.horizontalPer-t.percentObscured)/100),t.percentViewable?parseInt(t.percentViewable,10):0}catch(e){return n.log("getVisiblePercent error",e.message),-2}},this.logger=function(e){return function(){if(n.options.debug)try{for(var t,i,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];console.warn.apply(null,["%c"+e+" "+(null!=(t=null==(i=n.env)||null==i.getPlayerId?void 0:i.getPlayerId())?t:""),"background:#ffd400;color:#000;padding:2px"].concat(a))}catch(e){}}},this.options=Object.assign(this.options,e),this.env=t;var r={debug:this.options.debug,apiKey:this.options.apiKey};this.options.wtUrl&&(r.endpoint=this.options.wtUrl),window&&window.wtStream?this.stream=window.wtStream:(this.stream=new p(r),window&&(window.wtStream=this.stream)),this.log=this.logger("WTAT.core",this.options.debug,null==(i=this.env)||null==i.getPlayerId?void 0:i.getPlayerId()),this.log("version",this.options.v),this.createSession()}return e.prototype.onEvent=function(e){void 0===e&&(e={}),this.log("start.onEvent",e.type),this.sendData(e)},e}();function w(e,i,n){if(!e)return n;for(var r,a=e,o=t(Array.isArray(i)?i:i.split("."));!(r=o()).done;){var s=r.value;if(void 0===a[s])return n;a=a[s]}return a}var y={pre:"PREROLL",post:"POSTROLL",mid:"MIDROLL"},f="8.17";function m(e){var t={};return e.adsystem&&(t.adSys=e.adsystem),e.ima&&e.ima.ad&&(t.adId=e.ima.ad.g.adId,t.adAN=e.ima.ad.g.advertiserName,t.adDID=e.ima.ad.g.dealId,t.adWId=e.ima.ad.g.adWrapperIds,t.adWSys=e.ima.ad.g.adWrapperSystems,t.adMU=e.ima.ad.g.mediaUrl,t.adCId=e.ima.ad.g.creativeId,t.adWCId=e.ima.ad.g.adWrapperCreativeIds),t}var v,b,S=((b={modules:(v={},v.wtatJW=function(e,t){var i=this;void 0===t&&(t={}),this.player=void 0,this.options=void 0,this.sessionFlags={},this.log=function(){},this.utils=void 0,this.SHORT_NAME="jwp",this.PLAYER_EVENTS={firstFrame:function(){return{type:"jw:firstFrame"}},playlistItem:function(){return{type:"jw:playlistItem"}},nextClick:function(e){i.resetState(e)},adRequest:function(e){var t=Object.assign({type:"serve",adURL:e.tag},m(e));return i.player.utils.versionCheck(f)||"googima"!==e.client||(t.type="al"),e.adposition&&(t.adType=y[e.adposition]),i.options.sendDebug&&(t.debug="",e.tag||(t.debug="missing originalAdURL")),t},adLoaded:function(e){var t=Object.assign({type:"al",adURL:e.tag},m(e));return e.adposition&&(t.adType=y[e.adposition]),t},adStarted:function(e){var t={type:"sa"};return i.player.utils.versionCheck(f)||Object.assign(t,m(e)),e.adposition&&(t.adType=y[e.adposition]),t},adImpression:function(e){var t={type:"imp"};return e.adposition&&(t.adType=y[e.adposition]),t},adTime:function(e){var t=Math.round(e.position),n=Math.round(e.duration/4),r={};if(!i.sessionFlags.etqSent&&t>=3*n&&(i.sessionFlags.etqSent=!0,i.sessionFlags.esqSent=!0,i.sessionFlags.efqSent=!0,r.type="etq"),!i.sessionFlags.esqSent&&t>=2*n&&(i.sessionFlags.esqSent=!0,i.sessionFlags.efqSent=!0,r.type="esq"),!i.sessionFlags.efqSent&&t>=n&&(i.sessionFlags.efqSent=!0,r.type="efq"),e.adposition&&(r.adType=y[e.adposition]),r.type)return r},adComplete:function(e){var t={type:"ecp"};return e.adposition&&(t.adType=y[e.adposition]),t},adError:function(e){var t=e.adErrorCode,i={type:"error",st:"jw",err:String(e.code)};return t&&(i.err2=String(t)),e.adposition&&(i.adType=y[e.adposition]),i},adSkipped:function(e){var t={type:"skip"};return e.adposition&&(t.adType=y[e.adposition]),t},beforePlay:function(e){if("related-interaction"===e.playReason&&i.resetState(e),!i.sessionFlags.playSent){i.sessionFlags.playSent=!0;var t={type:"play",autoplay:!1};return"autostart"===e.playReason&&(t.autoplay=!0),t}},play:function(){if(!i.sessionFlags.playingSent)return i.sessionFlags.playingSent=!0,{type:"c0"}},time:function(e){if(i.sessionFlags.playingSent){var t=Math.floor(100*e.position/e.duration);if(!i.sessionFlags.c95Sent&&t>=95)return i.sessionFlags.c95Sent=!0,i.sessionFlags.c75Sent=!0,i.sessionFlags.c50Sent=!0,i.sessionFlags.c25Sent=!0,{type:"c95"};if(!i.sessionFlags.c75Sent&&t>=75)return i.sessionFlags.c75Sent=!0,i.sessionFlags.c50Sent=!0,i.sessionFlags.c25Sent=!0,{type:"c75"};if(!i.sessionFlags.c50Sent&&t>=50)return i.sessionFlags.c50Sent=!0,i.sessionFlags.c25Sent=!0,{type:"c50"};if(!i.sessionFlags.c25Sent&&t>=25)return i.sessionFlags.c25Sent=!0,{type:"c25"}}},"wt:adReq":function(e){return{type:"serve",adURL:e.adsRequest.adTagUrl}},"wt:error":function(e){return{type:"error",st:"wt",err:String(e.code)}}},this.start=function(){i.utils=new h(i.options,{getVideoSlot:i.getVideoSlot,getAdBlock:i.getAdBlock,getMediaId:i.getMediaId,getPlayerId:i.getPlayerId,getPlayerVersion:i.getPlayerVersion}),i.log=i.utils.logger("WTAT.jwp");var e=i;Object.assign(i.PLAYER_EVENTS,w(window,["wtatCustom","events"],{}),i.PLAYER_EVENTS),Object.keys(i.PLAYER_EVENTS).forEach((function(t){e.player.on(t,e._onPlayerEvent)})),i.player.on("complete",i.resetState)},this.resetState=function(){i.sessionFlags={},i.utils.createSession()},this._onPlayerEvent=function(e){var t;i.PLAYER_EVENTS[e.type]?(t="function"==typeof i.PLAYER_EVENTS[e.type]?i.PLAYER_EVENTS[e.type](e):!0===i.PLAYER_EVENTS[e.type]?{type:e.type}:i.PLAYER_EVENTS[e.type])&&(t.type?i.utils.onEvent(t,e):i.log("Encountered an event without a type. Not sending",e.type,t)):i.log("Untracked player event triggered",e.type,e)},this.cleanup=function(){delete i.utils,delete i.log,i.player=null},this.getVideoSlot=function(){return i.player.getContainer()},this.getMediaId=function(){var e=i.player.getPlaylistItem();if(e)return e.mediaid},this.getPlayerId=function(){return i.player.getConfig().pid},this.getPlayerVersion=function(){var e=i.player.version.split(/\W/);return e[0]+"."+e[1]+"."+e[2]},this.getAdBlock=function(){return+i.player.getAdBlock()},this.player=e,this.options=t,this.options.src=this.SHORT_NAME,this.options.debug},v)}).wtatJW={},b),I={v:"3.0.1-jw"},P={};try{var _=localStorage.getItem("wtDebug"),E=localStorage.getItem("wtUrl");_&&(P.debug=_),E&&(P.wtUrl=E)}catch(e){}function T(e,t){var i=Object.assign({},I,t);Object.keys(S.modules).forEach((function(n){var r,a=Object.assign({},i,S[n],t[n],P);Object.assign(e,((r={})[n]=new S.modules[n](e,a),r)),e[n].start()}))}var F;return!(F=window.jwplayerPluginJsonp)&&"function"==typeof window.jwplayer&&window.jwplayer().registerPlugin&&(F=window.jwplayer().registerPlugin),F&&F("wtat.plugin","7.0.0",(function(e,t){void 0===t&&(t={}),T(e,t)})),function(e,t,i){var n;void 0===e&&(e={}),void 0===i&&(i=!1),t?"string"==typeof t?n=jwplayer(t):"object"==typeof t&&t.id?n=jwplayer(t.id):t.on&&(n=t):n=jwplayer(),i?T(n,e):n.on("ready",(function(){return T(n,e)}))}}();
