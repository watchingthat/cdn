!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.wtAdTracer=t()}(this,function(){"use strict";var e=function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e};var t,i,a=(function(e){function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},t.apply(this,arguments)}e.exports=t}(t={exports:{}},t.exports),t.exports),r={endpoint:"https://c.p2r14.com/v5/in",batchSize:5,batchInterval:1e3,debug:!1},n={0:[]},o=0,s=!1,d=!1,l=function(){if(r.debug)try{for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];console.warn.apply(null,["%cWTAT.stream","background:#ffd400;color:#000;padding:2px"].concat(t))}catch(e){}};function h(){r.batchInterval>0&&(i=setInterval(c,r.batchInterval))}function p(){clearInterval(i)}function c(){if(!s){s=!0,p();var e=o;n[o+1]=[],o++,n[e].length&&function(e,t){l("sending",e);try{var i=JSON.stringify(e);if(navigator.sendBeacon){var a=new FormData;a.append("batch",i),a.append("apiKey",r.apiKey);var n=navigator.sendBeacon(r.endpoint,a);n||l("beacon queue error"),g(t)}else{var o=new XMLHttpRequest;o.open("POST",r.endpoint,!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.setRequestHeader("x-api-key",r.apiKey),o.setRequestHeader("Connection","keep-alive"),o.onreadystatechange=function(){g(t)},o.send("batch="+encodeURIComponent(i))}}catch(e){l("xhr error",e.message)}}(n[e],e),s=!1,h()}}function g(e){delete n[e]}var u=function(){function e(e){void 0===e&&(e={}),r=Object.assign(r,e),h()}var t=e.prototype;return t.push=function(e){d||(l("received",e),n[o].push(e),n[o].length>=r.batchSize&&c())},t.stop=function(){d=!0,n[o].length&&c(),p()},e}(),y=function(){function t(t,i){var a=this,r=i.getAdTech,n=i.getVideoSlot,o=i.getAdBlock,s=i.getMediaId,d=i.getPlayerId;if(e(this,"options",{debug:!1}),e(this,"sessionId",void 0),e(this,"sessionStartTime",0),e(this,"loopIdx",0),e(this,"requiredData",{}),e(this,"firstTimeData",null),e(this,"firstTimeDataSent",!1),e(this,"getAdTech",void 0),e(this,"getVideoSlot",void 0),e(this,"getAdBlock",void 0),e(this,"getMediaId",void 0),e(this,"getPlayerId",void 0),e(this,"stream",void 0),e(this,"getPU",function(e){var t=document.referrer;!t&&e&&(t=document.documentURI);try{(window.location===window.parent.location||!t&&document.location&&document.location.href)&&(t=document.location.href)}catch(e){a.log("gatherData pu set to referrer:",t,e.message)}return t}),e(this,"getPositionRelativeToViewPort",function(e,t){var i=t,r=t.parent,n={left:0,right:0,top:0,bottom:0};if(e){var o=e.getBoundingClientRect();i!==r&&(n=a.getPositionRelativeToViewPort(i.frameElement,r)),n={left:o.left+n.left,right:o.right+n.left,top:o.top+n.top,bottom:o.bottom+n.top}}return n}),e(this,"getViewPortSize",function(e){var t={width:1/0,height:1/0,area:1/0};return!isNaN(e.document.body.clientWidth)&&e.document.body.clientWidth>0&&(t.width=e.document.body.clientWidth),!isNaN(e.document.body.clientHeight)&&e.document.body.clientHeight>0&&(t.height=e.document.body.clientHeight),e.document.documentElement&&e.document.documentElement.clientWidth&&!isNaN(e.document.documentElement.clientWidth)&&(t.width=e.document.documentElement.clientWidth),e.document.documentElement&&e.document.documentElement.clientHeight&&!isNaN(e.document.documentElement.clientHeight)&&(t.height=e.document.documentElement.clientHeight),e.innerWidth&&!isNaN(e.innerWidth)&&(t.width=Math.min(t.width,e.innerWidth)),e.innerHeight&&!isNaN(e.innerHeight)&&(t.height=Math.min(t.height,e.innerHeight)),t.area=t.height*t.width,t}),e(this,"getWindowWH",function(){var e,t=0,i=0,r=0;try{t=(e=a.getViewPortSize(window.top)).width,i=e.height,r=1}catch(e){a.log("getWindowWH catch 1:",e.message)}if(!t){var n=window;t=(e=a.getViewPortSize(n)).width,i=e.height;try{for(;n.parent&&n!==n.parent;)t=(e=a.getViewPortSize(n.parent)).width,i=e.height,n=n.parent}catch(e){a.log("getWindowWH catch 2:",e.message)}}return[t,i,r]}),e(this,"getSameDomainViewability",function(e){var t=a.getViewPortSize(window.top),i=e.getBoundingClientRect(),r=-1,n=-1;if(t.area===1/0)return{error:"Failed to determine viewport",horizontalPer:0,verticalPer:0};var o=a.getPositionRelativeToViewPort(e,window);try{r=o.bottom<0||o.top>t.height?0:o.top<t.height&&o.bottom>t.height?(t.height-o.top)/i.height*100:o.top<0&&o.bottom>0?o.bottom/i.height*100:100,n=o.right<0||o.left>t.width?0:o.right<t.width&&o.left>t.width?(t.width-o.right)/i.width*100:o.left<0&&o.right>0?o.right/i.width*100:100}catch(e){return{error:"Failed to calculate viewability: "+e.message,horizontalPer:0,verticalPer:0}}return{horizontalPer:n,verticalPer:r}}),e(this,"getVisiblePercent",function(e){if(!e)return-1;var t={percentObscured:0,percentViewable:0,acceptedViewablePercentage:50,viewabilityStatus:!1,duration:0,cssInvisible:!1,domObscured:!1,secureIFrame:!1};try{var i=e.getBoundingClientRect();i.width*i.height>=242500&&(t.acceptedViewablePercentage=30);var r=window.getComputedStyle(e,null),n=r.getPropertyValue("visibility"),o=r.getPropertyValue("display");if("hidden"!==n&&"none"!==o||(t.cssInvisible=!0),t.cssInvisible)return 0;t.percentObscured=t.percentObscured||0;var s={};try{window.top.innerWidth||window.top.document.documentElement.clientWidth||window.top.document.body.clientWidth?s=a.getSameDomainViewability(e):t.secureIFrame=!0}catch(e){t.secureIFrame=!0}return s.error||t.secureIFrame||(t.percentViewable=(s.verticalPer-t.percentObscured)*(s.horizontalPer-t.percentObscured)/100),t.percentViewable?parseInt(t.percentViewable,10):0}catch(e){return a.log("getVisiblePercent error",e.message),-2}}),e(this,"logger",function(e){return function(){if(a.options.debug)try{for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];console.warn.apply(null,["%c"+e+" "+a.getPlayerId(),"background:#ffd400;color:#000;padding:2px"].concat(i))}catch(e){}}}),this.options=Object.assign(this.options,t),this.getAdTech=r,this.getVideoSlot=n,this.getAdBlock=o,this.getMediaId=s,this.getPlayerId=d,window&&window.wtStream)this.stream=window.wtStream;else{var l={debug:this.options.debug,apiKey:this.options.apiKey};this.options.wtUrl&&(l.endpoint=this.options.wtUrl),this.stream=new u(l),window&&(window.wtStream=this.stream)}this.log=this.logger("WTAT.core",this.options.debug,this.getPlayerId()),this.log("version",this.options.v),this.onEvent=this.onEvent.bind(this),this.createSession=this.createSession.bind(this),this.gatherFirstTimeData=this.gatherFirstTimeData.bind(this),this.sendData=this.sendData.bind(this),this.gatherData=this.gatherData.bind(this),this.replaceUrlMacros=this.replaceUrlMacros.bind(this),this.createSession()}var i=t.prototype;return i.onEvent=function(e){void 0===e&&(e={}),this.log("start.onEvent",e.type),this.sendData(e)},i.createSession=function(){for(var e="",t=0;t<12;t++)e+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXZY01234567890".charAt(Math.floor(64*Math.random()));return this.sessionId=Date.now()+"-"+e,this.sessionStartTime=Date.now(),this.loopIdx+=1,this.requiredData={rid:this.sessionId,idx:this.loopIdx,mediaId:this.getMediaId(),playerId:this.getPlayerId()},this.firstTimeData=this.gatherFirstTimeData(),this.firstTimeDataSent=!1,this.sessionId},i.gatherFirstTimeData=function(){var e=this.getWindowWH();return{type:"init",src:this.options.src,v:this.options.v,adTech:this.getAdTech(),aBl:this.getAdBlock(),ww:e[0],wh:e[1],fif:e[2],pu:this.getPU(e[2])}},i.sendData=function(e){this.firstTimeDataSent||(this.firstTimeDataSent=!0,this.stream.push(this.gatherData(this.firstTimeData))),this.stream.push(this.gatherData(e))},i.gatherData=function(e){var t,i,r;void 0===e&&(e={});try{var n=this.getVideoSlot();if(n){t=this.getVisiblePercent(n);var o=n.getBoundingClientRect();i=parseInt(o.width,10),r=parseInt(o.height,10)}}catch(e){this.log("gatherData ERROR reading ad WxH:",e.message)}return a({},e,this.requiredData,{per:t,w:i,h:r,cst:Date.now()-(this.sessionStartTime||0)})},i.replaceUrlMacros=function(e){if(!e)return e;if("string"!=typeof e)return e;var t=this.gatherData(this.firstTimeData);return e.replace(/\[wt_ad_width]/g,t.w).replace(/\[wt_ad_width_label]/g,"wt_ad_width").replace(/\[wt_ad_height]/g,t.h).replace(/\[wt_ad_height_label]/g,"wt_ad_height").replace(/\[wt_per]/g,String(t.per)).replace(/\[wt_per_label]/g,"wt_per").replace(/\[wt_page_url]/g,encodeURIComponent(t.pu)).replace(/\[wt_page_url_unenc]/g,t.pu).replace(/\[wt_page_url_label]/g,"wt_page_url").replace(/\[wt_fif]/g,String(t.fif)).replace(/\[wt_fif_label]/g,"wt_fif").replace(/\[wt_win_width]/g,String(t.ww)).replace(/\[wt_win_width_label]/g,"wt_win_width").replace(/\[wt_win_height]/g,String(t.wh)).replace(/\[wt_win_height_label]/g,"wt_win_height").replace(/\[wt_timestamp]/g,String(Date.now()))},t}(),f={0:"PREROLL","-1":"POSTROLL"};var m,v,w=function(){function t(t,i){var a=this;if(void 0===i&&(i={}),e(this,"player",void 0),e(this,"options",void 0),e(this,"adsManager",void 0),e(this,"imaAdsLoader",void 0),e(this,"playSent",!1),e(this,"playingSent",!1),e(this,"c25Sent",!1),e(this,"c50Sent",!1),e(this,"c75Sent",!1),e(this,"c95Sent",!1),e(this,"fullAdURLSent",!1),e(this,"adURL",void 0),e(this,"fwHooked",!1),e(this,"hasPreviousError",!1),e(this,"honeyPotOk",!1),e(this,"resetOnLoadStart",!1),e(this,"lastAdType",void 0),e(this,"log",void 0),e(this,"utils",void 0),e(this,"originalIma3AdMacroReplacement",void 0),e(this,"SHORT_NAME","bcp"),e(this,"hookFw",function(){a.player.FreeWheelPlugin.Html5&&a.player.FreeWheelPlugin.Html5._adContext&&(a.adURL=a.player.FreeWheelPlugin.Html5._adContext._adRequest.generateTypeBRequestUrl(),a.log("hookFw this.player.FreeWheelPlugin",a.player.FreeWheelPlugin),a.fwHooked||(a.fwHooked=!0,a.player.FreeWheelPlugin.Html5._adContext.addEventListener(window.tv.freewheel.SDK.EVENT_AD_IMPRESSION,function(e){return a.player.trigger({type:"wt:imp",originalEvent:e})}),a.player.FreeWheelPlugin.Html5._adContext.addEventListener(window.tv.freewheel.SDK.EVENT_AD,function(e){if(a.log("+++++EVENT_AD",e.subType,function(e){var t=[];for(var i in e)t.push(i+("function"==typeof e[i]?"()":""));return t}(e.adInstance),e),e.subType===window.tv.freewheel.SDK.EVENT_ERROR){var t=e[window.tv.freewheel.SDK.INFO_KEY_ERROR_CODE],i=e[window.tv.freewheel.SDK.INFO_KEY_ERROR_INFO],r=e[window.tv.freewheel.SDK.INFO_KEY_ERROR_MODULE];a.log("errorCode, errorInfo, errorModule",t,i,r),a.hasPreviousError=!0;var n={type:"error",st:"fw",err:String(t||i),debug:String(i)};a.lastAdType&&(n.adType=a.lastAdType),a.sendData(n)}}),a.player.FreeWheelPlugin.Html5._adContext.addEventListener(window.tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,function(e){var t;if(a.log("+++++EVENT_REQUEST_COMPLETE",e),e.success){if(!(e.response.errors&&e.response.errors.errors&&e.response.errors.errors.length))return a.player.trigger({type:"wt:al",originalEvent:e});t={type:"error",st:"fw",err:e.response.errors.errors[0].name}}else t={type:"error",st:"fw",err:"req-failed"};t&&a.sendData(t)})))}),e(this,"getCurrentAdDetails",function(e){if(a.player.ima3){if(e){var t={adId:e.getAdId(),adSys:e.getAdSystem(),adAN:e.getAdvertiserName(),adDID:e.getDealId(),adWId:e.getWrapperAdIds(),adWSys:e.getWrapperAdSystems(),adMU:e.getMediaUrl(),adCId:e.getCreativeId(),adWCId:e.getWrapperCreativeIds()};if(e.getAdPodInfo){var i=e.getAdPodInfo();t.adType=f[i.getPodIndex()]||"MIDROLL",a.lastAdType=t.adType}return t}}else if(a.player.FreeWheelPlugin){var r=e;if(!r&&a.player.FreeWheelPlugin.Html5&&a.player.FreeWheelPlugin.Html5._currentSlot&&(r=a.player.FreeWheelPlugin.Html5._currentSlot.getCurrentAdInstance()),r){var n={adId:r.getAdId(),adMU:r.getActiveCreativeRendition().getPrimaryCreativeRenditionAsset().getUrl(),adCId:r._creativeId,adType:r.getSlot().getTimePositionClass()};return a.lastAdType=n.adType,n}}return{}}),e(this,"PLAYER_EVENTS",{"ads-request":function(){var e,t,i={type:"serve"};return a.player.ima3?(e=a.player.ima3.settings.serverUrl,a.player.ima3.adsRequest&&a.player.ima3.adsRequest.adTagUrl&&(e||(e=a.player.ima3.adsRequest.adTagUrl),t=a.player.ima3.adsRequest.adTagUrl),i.adURL=t,a.options.sendDebug&&(i.debug="",e||(i.debug="missing originalAdURL"))):a.player.FreeWheelPlugin&&(a.hookFw(),i.adURL=a.player.FreeWheelPlugin.settings[a.player.FreeWheelPlugin.tech].serverUrl,a.player.FreeWheelPlugin.Html5&&!a.fullAdURLSent&&(a.adURL=a.player.FreeWheelPlugin.Html5._adContext._adRequest.generateTypeBRequestUrl())),i},"ads-ad-started":function(){var e={type:"sa"};return a.player.ads&&a.player.ads.ad&&a.player.ads.ad.type&&(e.adType=a.player.ads.ad.type,a.lastAdType=e.adType),e},play:function(){if(!a.playSent)return a.playSent=!0,{type:"play"}},adtimeout:function(){if(!a.hasPreviousError)return a.hasPreviousError=!0,{type:"error",st:"player",err:"adtimeout"}},"ads-first-quartile":function(){var e={type:"efq"};return a.player.ads&&a.player.ads.ad&&a.player.ads.ad.type&&(e.adType=a.player.ads.ad.type,a.lastAdType=e.adType),e},"ads-midpoint":function(){var e={type:"esq"};return a.player.ads&&a.player.ads.ad&&a.player.ads.ad.type&&(e.adType=a.player.ads.ad.type,a.lastAdType=e.adType),e},"ads-third-quartile":function(){var e={type:"etq"};return a.player.ads&&a.player.ads.ad&&a.player.ads.ad.type&&(e.adType=a.player.ads.ad.type,a.lastAdType=e.adType),e},"ads-ad-ended":function(){var e={type:"ecp"};return a.player.ads&&a.player.ads.ad&&a.player.ads.ad.type&&(e.adType=a.player.ads.ad.type,a.lastAdType=void 0),e},playing:function(){if(!a.playingSent)return a.lastAdType=void 0,a.playingSent=!0,{type:"c0"}},timeupdate:function(){if(a.playingSent){var e=Math.floor(100*a.player.currentTime()/a.player.duration());if(!a.c95Sent&&e>=95)return a.c95Sent=!0,a.c75Sent=!0,a.c50Sent=!0,a.c25Sent=!0,{type:"c95"};if(!a.c75Sent&&e>=75)return a.c75Sent=!0,a.c50Sent=!0,a.c25Sent=!0,{type:"c75"};if(!a.c50Sent&&e>=50)return a.c50Sent=!0,a.c25Sent=!0,{type:"c50"};if(!a.c25Sent&&e>=25)return a.c25Sent=!0,{type:"c25"}}},"wt:imp":function(){var e={type:"imp"},t=a.getCurrentAdDetails();return Object.assign(e,t),a.player.ads&&a.player.ads.ad&&a.player.ads.ad.type&&(e.adType=a.player.ads.ad.type,a.lastAdType=e.adType),e},"wt:al":function(e){var t={type:"al"},i=e.originalEvent;try{if(a.player.ima3){if(i&&i.getAd){var r=a.getCurrentAdDetails(i.getAd());Object.assign(t,r)}}else if(a.player.FreeWheelPlugin){var n=a.getCurrentAdDetails();Object.assign(t,n)}}catch(e){a.log("no ad",e)}return t},"ima3-impression":function(e){a.player.trigger({type:"wt:imp",originalEvent:e})},"ima3-ready":function(){a.originalIma3AdMacroReplacement||(a.player.ima3?(a.originalIma3AdMacroReplacement=a.player.ima3.adMacroReplacement,a.player.ima3.adMacroReplacement=a._adMacroReplacement):a.log("WARNING: player.ima3 not available!"))},"ima3-loaded":function(e){a.player.trigger({type:"wt:al",originalEvent:e})},"ima3-log":function(e){if(e.originalEvent&&e.originalEvent.getAdData){var t=e.originalEvent.getAdData(),i={type:"error",st:"vpaid",err:String(t.adError.h)};return a.lastAdType&&(i.adType=a.lastAdType),i}},"ima3-hardtimeout":function(){return a.hasPreviousError=!0,{type:"error",st:"player",err:"ima3-hardtimeout"}},ima3error:function(){return a.hasPreviousError=!0,{type:"error",st:"player",err:"ima3error"}},"ima3-ad-error":function(e){a.hasPreviousError=!0;var t=e.originalEvent;if(t&&t.getError){var i=t.getError(),r=i.getVastErrorCode(),n=i.getErrorCode(),o={type:"error",st:"vpaid",err:String(r),err2:String(n)};if(a.lastAdType&&(o.adType=a.lastAdType),a.options.sendDebug)try{o.debug="imaError: "+i.getMessage()+", type: "+i.getType()}catch(e){}return a.log("IMA threw an error",i,i.getInnerError&&i.getInnerError()),a.log("ERROR: VAST CODE",r),o}return a.log("ima3-ad-error originalEvent does not look like an ima3 event",e),{type:"error",st:"player",err:"ima3-ad-error"}},"ima3-skip":function(){var e={type:"skip"};return a.player.ads&&a.player.ads.ad&&a.player.ads.ad.type&&(e.adType=a.player.ads.ad.type,a.lastAdType=void 0),e},analytics_request:function(e){if(e&&e.params&&e.params.event){if("video_impression"===e.params.event)return{type:"bc:video_impression",autoplay:e.params.autoplay||!1};if("video_view"===e.params.event)return{type:"bc:video_view"}}},"fw-ads-manager-loaded":this.hookFw}),e(this,"resetState",function(e){("loadstart"!==e.type||a.resetOnLoadStart)&&(a.playSent=!1,a.playingSent=!1,a.c25Sent=!1,a.c50Sent=!1,a.c75Sent=!1,a.c95Sent=!1,a.hasPreviousError=!1,a.lastAdType=void 0,a.fwHooked=!1,a.fullAdURLSent=!1,a.adURL=void 0,a.utils.createSession()),a.resetOnLoadStart="loadstart"===e.type}),e(this,"getDebugData",function(){return{}}),this.player=t,this.options=i,this.options.src=this.SHORT_NAME,"debug"===this.options.debug)debugger;this.start=this.start.bind(this),this.sendData=this.sendData.bind(this),this._adMacroReplacement=this._adMacroReplacement.bind(this),this._onPlayerEvent=this._onPlayerEvent.bind(this),this._honeyPot=this._honeyPot.bind(this),this.cleanup=this.cleanup.bind(this),this.getAdTech=this.getAdTech.bind(this),this.getVideoSlot=this.getVideoSlot.bind(this),this.getMediaId=this.getMediaId.bind(this),this.getPlayerId=this.getPlayerId.bind(this),this.getAdBlock=this.getAdBlock.bind(this),this._honeyPot(),this.utils=new y(i,{getAdTech:this.getAdTech,getVideoSlot:this.getVideoSlot,getAdBlock:this.getAdBlock,getDebugData:this.getDebugData,getMediaId:this.getMediaId,getPlayerId:this.getPlayerId}),this.log=this.utils.logger("WTAT.bcp")}var i=t.prototype;return i.start=function(){this.player.ima3&&(this.originalIma3AdMacroReplacement=this.player.ima3.adMacroReplacement,this.player.ima3.adMacroReplacement=this._adMacroReplacement);var e=this;Object.keys(this.PLAYER_EVENTS).forEach(function(t){e.player.on(t,e._onPlayerEvent)}),this.player.on("loadstart",this.resetState),this.player.on("ended",this.resetState)},i.sendData=function(e){e&&!this.fullAdURLSent&&this.adURL&&(e.adURL=this.adURL,this.fullAdURLSent=!0,this.adURL=void 0),this.utils.sendData(e)},i._adMacroReplacement=function(e){var t=this.utils.replaceUrlMacros(e),i=this.originalIma3AdMacroReplacement(t);return this.log("_adMacroReplacement on",e,"resulted in",t,"first then in",i),i},i._onPlayerEvent=function(e){var t;this.PLAYER_EVENTS[e.type]?(t="function"==typeof this.PLAYER_EVENTS[e.type]?this.PLAYER_EVENTS[e.type](e):this.PLAYER_EVENTS[e.type])&&this.sendData(t):this.log("Untracked player event triggered",e.type,e)},i._honeyPot=function(){var e=document.createElement("div");e.className="afs_ads",e.innerHTML="&nbsp;",e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.background="transparent";try{this.player.el().appendChild(e),this.honeyPotOk=!0}catch(e){this.log("cannot attach honeypot",e.message)}},i.cleanup=function(){this.originalIma3AdMacroReplacement=null,delete this.utils,this.player=null,this.adsManager=null,this.imaAdsLoader=null,delete this.log},i.getAdTech=function(){return this.player.ima3&&this.player.ima3.adTech?this.player.ima3.adTech:"html5"},i.getVideoSlot=function(){return this.player.el()},i.getMediaId=function(){return this.player.options_&&this.player.options_["data-account"]&&this.player.options_["data-video-id"]?this.player.options_["data-account"]+":"+this.player.options_["data-video-id"]:this.player.bcinfo&&this.player.bcinfo.accountId&&this.player.mediainfo&&this.player.mediainfo.id?this.player.bcinfo.accountId+":"+this.player.mediainfo.id:void 0},i.getPlayerId=function(){return this.player.options_&&this.player.options_["data-account"]&&this.player.options_["data-player"]?this.player.options_["data-account"]+":"+this.player.options_["data-player"]:this.player.bcinfo&&this.player.bcinfo.accountId&&this.player.bcinfo.playerId?this.player.bcinfo.accountId+":"+this.player.bcinfo.playerId:void 0},i.getAdBlock=function(){if(!this.honeyPotOk)return-1;try{var e=this.player.el().getElementsByClassName("afs_ads"),t=e[e.length-1];return t&&null!==t.offsetParent&&"afs_ads"===t.className&&0!==t.innerHTML.length&&0!==t.clientHeight?0:1}catch(e){return this.log("error getting ad block status",e.message),-2}},t}(),b=((v={modules:(m={},m.wtatPlayer=w,m)}).wtatPlayer={},v),S={v:"2.7.2-beta"},_={};try{var T=localStorage.getItem("wtDebug"),E=localStorage.getItem("wtUrl");T&&(_.debug=T),E&&(_.wtUrl=E)}catch(e){}function P(e){var t=this;void 0===e&&(e={}),this.ready(function(){var i=Object.assign({},S,e);Object.keys(b.modules).forEach(function(a){var r=Object.assign({},i,b[a],e[a],_);t[a]=new b.modules[a](t,r),t[a].start(),t.addClass("wtat-"+a)})})}return(window.videojs.registerPlugin||window.videojs.plugin)("wtAdTracer",P),P.VERSION="2.7.2-beta",P});
